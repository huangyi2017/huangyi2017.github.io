# 第一节：索引什么情况下会失效

## 一、前言
   在工作中，如果我们想提高一条语句查询速度，通常都会想对字段建立索引,但是索引并不是万能的。建立了索引，并不意味着任何查询语句都能走索引扫描。
稍不注意，可能你写的查询语句是会导致索引失效，从而走了全表扫描，虽然查询的结果没问题，但是查询的性能大大降低。
今天就来跟大家盘一盘，常见的 6 种会发生索引失效的场景.

## 索引存储结构长什么样
我们先来看看索引存储结构长什么样？因为只有知道索引的存储结构，才能更好的理解索引失效的问题
索引的存储结构跟MySQL使用哪种存储引擎有关，因为存储引擎就是负责将数据持久化在磁盘中，而不同的存储引擎采用的索引数据结构也会不相同
- ** InnoDB 存储引擎：B+ 树索引的叶子节点保存数据本身**
- ** MyISAM 存储引擎：B+ 树索引的叶子节点保存数据的物理地址**

查询条件用上了索引列，并不一定查询过程就一定都用上索引，接下来我们再一起看看哪些情况会导致索引实现，而发生全表扫描

### 对索引使用左或者左右模糊匹配
当我们使用左或者左右模糊匹配的时候，也就是 like %xx 或者 like %xx% 这两种方式都会造成索引失效

为什么 like 关键字左或者左右模糊匹配无法走索引呢？
因为索引 B+ 树是按照「索引值」有序排列存储的，只能根据前缀进行比较
![img.png](index.png)


### 对索引使用函数